<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <script type="text/javascript">
        document.body.requestFullscreen();
        window.addEventListener("load", function() {
            window.scrollTo(0,1);
        });
    </script>

    <style type="text/css">
        /* Style the video: 100% width and height to cover the entire window */
        #myVideo {
          position: fixed;
          right: 0;
          bottom: 0;
          min-width: 100%; 
          min-height: 100%;
        }
    </style>
</head>

<body>

    <video autoplay muted loop id="myVideo">
      <source src="MC_SensoryTransaction_DL_320x480.mp4" type="video/mp4">
    </video>

<!--     <p>Hello 4!</p>
    <p id="logs"></p>

    <div id="error-log"></div>


    
    <input type="file" accept="audio/*" capture> -->

    <script>
        document.getElementById("logs").innerHTML = navigator.userAgent;

        console.log = (function (old_function, div_log) { 
            return function (text) {
                old_function(text);
                div_log.value += text;
            };
        } (console.log.bind(console), document.getElementById("error-log")));

        var handleSuccess = function(stream) {
            var context = new AudioContext();
            var source = context.createMediaStreamSource(stream);
            var processor = context.createScriptProcessor(1024, 1, 1);

            source.connect(processor);
            processor.connect(context.destination);

            document.getElementById("logs").innerHTML += "hey";

            processor.onaudioprocess = function(e) {
                // Do something with the data, i.e Convert this to WAV
                document.getElementById("logs").innerHTML = e.inputBuffer;
            };
        };

        navigator.mediaDevices.getUserMedia({ audio: true, video: true })
          .then(handleSuccess);

    </script>

    <!-- <audio id="player" controls></audio> -->
    <script>
      var audio = new Audio('audio_file.mp3');
      audio.play();

      var handleSuccess = function(stream) {
        document.getElementById("logs").innerHTML += "works?";
        if (window.URL) {
          player.srcObject = stream;
        } else {
          player.src = stream;
        }
      };

      document.getElementById("logs").innerHTML += "invoking getUserMedia";

      navigator.mediaDevices.getUserMedia({ audio: true, video: false })
          .then(handleSuccess);
    </script>
</body>